<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    <title>Prestasi</title>
    <link rel="stylesheet" href="assets/css/reset.css" />
    <link rel="stylesheet" href="assets/css/colors.css" />
    <link rel="stylesheet" href="assets/css/card.css" />
    <link rel="stylesheet" href="assets/css/utils.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <div id="particles-js" class="bg"></div>
    <main>
      <form action="minatbakat.html" id="form">
        <section class="card">
          <div class="card-header">
            <h1>Prestasi Akademik</h1>
            <p class="description p-0">
              Isilah Dengan Prestasi akademik yang pernah dicapai hingga saat
              ini
            </p>
          </div>
          <div class="card-body">
            <div class="form-group">
              <label for="">Olimpiade Sains</label>
              <div class="d-flex gap-1">
                <select id="olimpiade_peringkat">
                  <option value="" hidden>Peringkat</option>
                  <option value="Juara 1">Juara 1</option>
                  <option value="Juara 2">Juara 2</option>
                  <option value="Juara 3">Juara 3</option>
                  <option value="Juara Harapan/Favorit">
                    Juara Harapan/Favorit
                  </option>
                </select>
                <select id="olimpiade_tingkat">
                  <option value="" hidden>Tingkat</option>
                  <option value="Kabupaten/Kota">Tingkat Kabupaten/Kota</option>
                  <option value="Provinsi">Tingkat Provinsi</option>
                  <option value="Nasional">Tingkat Nasional</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="">Karya Tulis Ilmiah</label>
              <div class="d-flex gap-1">
                <select id="kti_peringkat">
                  <option value="" hidden>Peringkat</option>
                  <option value="Juara 1">Juara 1</option>
                  <option value="Juara 2">Juara 2</option>
                  <option value="Juara 3">Juara 3</option>
                  <option value="Juara Harapan/Favorit">
                    Juara Harapan/Favorit
                  </option>
                </select>

                <select id="kti_tingkat">
                  <option value="" hidden>Tingkat</option>
                  <option value="Kabupaten/Kota">Tingkat Kabupaten/Kota</option>
                  <option value="Provinsi">Tingkat Provinsi</option>
                  <option value="Nasional">Tingkat Nasional</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="">Debat/sejenis</label>
              <div class="d-flex gap-1">
                <select id="debat_peringkat">
                  <option value="" hidden>Peringkat</option>
                  <option value="Juara 1">Juara 1</option>
                  <option value="Juara 2">Juara 2</option>
                  <option value="Juara 3">Juara 3</option>
                  <option value="Juara Harapan/Favorit">
                    Juara Harapan/Favorit
                  </option>
                </select>

                <select id="debat_tingkat">
                  <option value="" hidden>Tingkat</option>
                  <option value="Kabupaten/Kota">Tingkat Kabupaten/Kota</option>
                  <option value="Provinsi">Tingkat Provinsi</option>
                  <option value="Nasional">Tingkat Nasional</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="">Lainnya</label>
              <div class="d-flex gap-1">
                <select id="lainnya_peringkat">
                  <option value="" hidden>Peringkat</option>
                  <option value="Juara 1">Juara 1</option>
                  <option value="Juara 2">Juara 2</option>
                  <option value="Juara 3">Juara 3</option>
                  <option value="Juara Harapan/Favorit">
                    Juara Harapan/Favorit
                  </option>
                </select>

                <select id="lainnya_tingkat">
                  <option value="" hidden>Tingkat</option>
                  <option value="Kabupaten/Kota">Tingkat Kabupaten/Kota</option>
                  <option value="Provinsi">Tingkat Provinsi</option>
                  <option value="Nasional">Tingkat Nasional</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="uraian">Uraian</label>
              <p class="description">
                Beri penjelasan pada prestasi yang Anda raih.
              </p>
              <textarea
                name=""
                id="uraian"
                cols="30"
                rows="5"
                placeholder="Uraian ...."
              ></textarea>
            </div>

            <div class="form-group d-flex gap-1">
              <button class="bg-secondary" id="back-btn" type="button">
                Sebelumnya
              </button>
              <button type="submit">Selanjutnya</button>
            </div>
          </div>
        </section>
      </form>
    </main>

    <script src="vendor/particle-js/particles.min.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="vendor/storage.js"></script>
    <script>
      // mengambil semua elemen di form
      const element = {
        olimpiade: {
          peringkat: document.getElementById("olimpiade_peringkat"),
          tingkat: document.getElementById("olimpiade_tingkat"),
        },
        kti: {
          peringkat: document.getElementById("kti_peringkat"),
          tingkat: document.getElementById("kti_tingkat"),
        },
        debat: {
          peringkat: document.getElementById("debat_peringkat"),
          tingkat: document.getElementById("debat_tingkat"),
        },
        lainnya: {
          peringkat: document.getElementById("lainnya_peringkat"),
          tingkat: document.getElementById("lainnya_tingkat"),
        },
        uraian: document.getElementById("uraian"),
      };

      // object controller untuk menyimpan data form di session storage
      const storagePrestasi = new Storage_("prestasi");
      // mengambil data di session storage
      const prestasi = storagePrestasi.getFirst();

      // jika sudah ada data dalam session storage, maka update isi dari input form
      if (prestasi) {
        element.olimpiade.peringkat.value = prestasi.olimpiade.peringkat;
        element.olimpiade.tingkat.value = prestasi.olimpiade.tingkat;
        element.kti.peringkat.value = prestasi.kti.peringkat;
        element.kti.tingkat.value = prestasi.kti.tingkat;
        element.debat.peringkat.value = prestasi.debat.peringkat;
        element.debat.tingkat.value = prestasi.debat.tingkat;
        element.lainnya.peringkat.value = prestasi.lainnya.peringkat;
        element.lainnya.tingkat.value = prestasi.lainnya.tingkat;
        element.uraian.value = prestasi.uraian;
      }

      const backBtn = document.getElementById("back-btn");
      const form = document.getElementById("form");
      const formAction = form.action;

      // ketika form disubmit
      form.addEventListener("submit", (e) => {
        // cegah form untuk mensubmit data
        e.preventDefault();

        updateStorage();

        // arahkan ke halaman selanjutnya
        location.href = formAction;
      });

      backBtn.addEventListener("click", (e) => {
        e.preventDefault();

        updateStorage();

        // arahkan ke halaman selanjutnya
        location.href = "index.html";
      });

      function updateStorage() {
        // isi nilai dari input ke dalam session storage untuk digunakan nanti
        storagePrestasi.updateFirst({
          olimpiade: {
            peringkat: element.olimpiade.peringkat.value,
            tingkat: element.olimpiade.tingkat.value,
          },
          kti: {
            peringkat: element.kti.peringkat.value,
            tingkat: element.kti.tingkat.value,
          },
          debat: {
            peringkat: element.debat.peringkat.value,
            tingkat: element.debat.tingkat.value,
          },
          lainnya: {
            peringkat: element.lainnya.peringkat.value,
            tingkat: element.lainnya.tingkat.value,
          },
          uraian: element.uraian.value,
        });
      }
    </script>
  </body>
</html>

<style>
  .radio {
    display: flex;
    font-size: 10px;
  }
</style>
